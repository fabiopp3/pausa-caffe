<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Disponibilità gruppo {{ group }}</title>
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <h1>☕ Prossime disponibilità</h1>

        {% if nickname %}
            <p>Sei loggato come <strong>{{ nickname }}</strong> — <a href="/logout">Esci</a></p>
        {% endif %}

        <form method="post" action="/{{ group }}/submit">
            <label for="bar_id">Bar</label>
            <select name="bar_id" required>
                {% for bar in bars %}
                <option value="{{ bar.id }}">{{ bar.name }}</option>
                {% endfor %}
            </select>
            <label for="start_time">Orario inizio</label>
            <input type="time" name="start_time" required>
            <label for="end_time">Orario fine</label>
            <input type="time" name="end_time" required>
            <label for="date_str">Data</label>
            <input type="date" name="date_str" value="{{ date }}" required>
            <button type="submit">Invia</button>
        </form>

        <ul>
            {% for availability in availabilities %}
            <li>
                {{ availability.user.nickname }} — {{ availability.bar.name }} —
                {{ availability.start_time.strftime('%H:%M') }} - {{ availability.end_time.strftime('%H:%M') }} —
                {{ availability.date.strftime('%Y-%m-%d') }}
                {% if availability.user.nickname == nickname %}
                <form method="post" action="/{{ group }}/delete" style="display:inline;">
                    <input type="hidden" name="avail_id" value="{{ availability.id }}">
                    <button type="submit">❌</button>
                </form>
                {% endif %}
            </li>
            {% endfor %}
        </ul>

        <p><a href="/">🏠 Torna alla homepage</a></p>
    </div>
</body>
</html>